<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layout/layout}" layout:fragment="content">
<head>
    <title>Find My Dog</title>
    <style>
        .post-content {
            display: flex;
            align-items: center;
            width: 100%;
            border: 1px solid #ddd;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }

        .post-image-container {
            width: 270px; /* 이미지 컨테이너의 고정 너비 */
            height: 300px; /* 이미지 컨테이너의 고정 높이 */
            flex-shrink: 0; /* 컨테이너가 줄어들지 않도록 설정 */
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        .post-image {
            width: auto;
            height: 100%;
            object-fit: cover; /* 이미지가 컨테이너에 맞게 조절되도록 설정 */
            border-radius: 5px;
        }

        .post-text {
            flex: 1;
            padding-left: 20px;
            text-align: left;
        }

        @media (max-width: 768px) {
            .post-content {
                flex-direction: column;
                align-items: flex-start;
            }

            .post-image-container, .post-text {
                width: 100%; /* 이미지와 텍스트 컨테이너가 차지하는 최대 너비를 100%로 설정 */
                height: auto;
                padding-left: 0;
            }

            .post-image {
                height: auto; /* 이미지의 높이를 자동으로 설정 */
            }
        }
    </style>
</head>
<body>

<!-- Page Content-->
<div class="container px-4 px-lg-5">
    <!-- Slide Wrapper -->
    <div class="row gx-4 gx-lg-5 align-items-stretch my-5 slide_div">
        <div th:each="post : ${posts}" class="slide-item">
            <div th:if="${not #lists.isEmpty(post.images)}" class="post-content">
                <div class="post-image-container">
                    <img th:src="@{'/images/' + ${post.images[0].storedFileName}}" alt="Post Image" class="post-image"/>
                </div>
                <div class="post-text">
                    <h1 class="" th:text="${post.kind}"></h1>
                    <a th:href="@{/posts/detail/{id}(id=${post.id})}" th:text="${post.title}"></a>
                    <p th:if="${post.modifiedDate != null}" th:text="${#temporals.format(post.modifiedDate, 'yyyy년 MM월 dd일 HH시 mm분')}"></p>

                </div>
            </div>
        </div>
        <div th:if="${#lists.isEmpty(posts)}" class="col-12">
            <p>등록된 포스트가 없습니다.</p>
        </div>
    </div>
</div>

<!-- Call to Action-->
<div class="card text-white bg-secondary my-5 py-4 text-center">
    <div class="card-body"><p class="text-white m-0">광고 내용</p></div>
</div>
<!-- Content Row-->
<div class="row gx-4 gx-lg-5">
    <div class="col-md-4 mb-5">
        <div class="card h-100">
            <div class="card-body">
                <h2 class="card-title">유기견 공고</h2>
                <p class="card-text">공고 내용</p>
            </div>
            <div class="card-footer"><a class="btn btn-primary btn-sm" href="#!">More Info</a></div>
        </div>
    </div>
    <div class="col-md-4 mb-5">
        <div class="card h-100">
            <div class="card-body">
                <h2 class="card-title">유기견 공고2</h2>
                <p class="card-text">공고 내용</p>
            </div>
            <div class="card-footer"><a class="btn btn-primary btn-sm" href="#!">More Info</a></div>
        </div>
    </div>
    <div class="col-md-4 mb-5">
        <div class="card h-100">
            <div class="card-body">
                <h2 class="card-title">유기견 공고3</h2>
                <p class="card-text">공고 내용</p>
            </div>
            <div class="card-footer"><a class="btn btn-primary btn-sm" href="#!">More Info</a></div>
        </div>
    </div>
</div>
<div id="map" style="width:100%;height:350px;"></div>
<table>
    <tbody>
    <tr th:each="map : ${mapinfo}">
        <td th:text="${map.content.pname}"></td>
        <td th:text="${map.content.latitude}"></td>
        <td th:text="${map.content.longitude}"></td>
    </tr>
    </tbody>
</table>
</body>
<script>
    $(document).ready(function(){
        $(".slide_div").slick({
            dots: true,
            autoplay: true,
            autoplaySpeed: 5000,
            slidesToShow: 2,
            slidesToScroll: 2,
            responsive: [
                {
                    breakpoint: 768,
                    settings: {
                        slidesToShow: 1,
                        slidesToScroll: 1,
                    }
                }
            ]
        });
    });
</script>
<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=54b2cd781663af1c76944546233135db&libraries=clusterer"></script>
<script>
    // <맵 생성>
    var container = document.getElementById('map');
    var options = {
        center: new kakao.maps.LatLng(37.402707, 126.922044),
        level: 9
    };

    var map = new kakao.maps.Map(container, options);
    // </맵 생성>


    var positions = [
        {
            title: '안양역',
            "lat": 37.402707,
            "lng": 126.922044
        },
        {
            title: '안양역 주위 1',
            "lat": 37.400707,
            "lng": 126.920044
        },
        {
            title: '안양역 주위 2',
            "lat": 37.403007,
            "lng": 126.925044
        },
        {
            title: '안양역 주위 3',
            "lat": 37.405707,
            "lng": 126.925044
        }
    ];

    var markers = positions.map(function(position) {  // 마커를 배열 단위로 묶음
        return new kakao.maps.Marker({
            position : new kakao.maps.LatLng(position.lat, position.lng)
        });
    });

    var clusterer = new kakao.maps.MarkerClusterer({
        map: map, // 마커들을 클러스터로 관리하고 표시할 지도 객체
        averageCenter: true, // 클러스터에 포함된 마커들의 평균 위치를 클러스터 마커 위치로 설정
        minLevel: 5, // 클러스터 할 최소 지도 레벨
        markers: markers // 클러스터에 마커 추가
    });
</script>

</html>
